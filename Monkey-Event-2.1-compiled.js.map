{"version":3,"sources":["Monkey-Event-2.1.js"],"names":[],"mappings":"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","file":"Monkey-Event-2.1-compiled.js","sourcesContent":["var MonkeyEventInit = (function(){\r\n\r\n\tvar MonkeyEvent = {};\r\n\r\n\tvar ISPC = !(/(phone|pad|pod|iPhone|iPod|ios|iPad|Android|Mobile|BlackBerry|IEMobile|MQQBrowser|JUC|Fennec|wOSBrowser|BrowserNG|WebOS|Symbian|Windows Phone)/i).test(navigator.userAgent);\r\n\r\n\tMonkeyEvent.MOUSE_DOWN = \"mousedown\";\r\n\tMonkeyEvent.MOUSE_UP = \"mouseup\";\r\n\tMonkeyEvent.MOUSE_MOVE = \"mousemove\";\r\n\tMonkeyEvent.MOUSE_OVER = \"mouseover\";\r\n\tMonkeyEvent.MOUSE_OUT = \"mouseout\";\r\n\tif(!ISPC){\r\n\t\tMonkeyEvent.MOUSE_DOWN = \"touchstart\";\r\n\t\tMonkeyEvent.MOUSE_UP = \"touchend\";\r\n\t\tMonkeyEvent.MOUSE_MOVE = \"touchmove\";\r\n\t}\r\n\r\n\tMonkeyEvent.addEventListener = function (o, t, f, b) {\r\n\t\tif (b == null) {\r\n\t\t\tb = false;\r\n\t\t}\r\n\t\tif (o.addEventListener) {\r\n\t\t\to.addEventListener(t, f, b);\r\n\t\t\treturn true;\r\n\t\t} else if (o.attachEvent) {\r\n\t\t\to.attachEvent(\"on\" + t, f);\r\n\t\t\treturn true;\r\n\t\t}\r\n\t};\r\n\r\n\tMonkeyEvent.removeEventListener = function (o, t, f) {\r\n\t\tif (o.removeEventListener) {\r\n\t\t\to.removeEventListener(t, f);\r\n\t\t\treturn true;\r\n\t\t} else if (o.detachEvent) {\r\n\t\t\to.detachEvent(\"on\" + t, f);\r\n\t\t\treturn true;\r\n\t\t}\r\n\t};\r\n\r\n\tvar EvList=[],\r\n        dx = [],\r\n        dy = [],\r\n        mx = [],\r\n        my = [],\r\n        strx = stry = 0,\r\n\t\tstartTime, endTime,\r\n\t\t_speed = {x: 0, y: 0},\r\n\t\t_cz = 50, //移动触发值\r\n        _moveEnd = {},\r\n\t\tcurrentEvent = null, //选中对象\r\n        previousDist,\r\n        previousAngle,\r\n\t\tBODY_MOUSE_UP = function(e){\r\n\t\t\tif(!currentEvent)\r\n\t\t\t\treturn;\r\n\r\n\t\t\tvar mvalx = mx[0] - strx,\r\n\t\t\t\tmvaly = my[0] - stry;\r\n\r\n\t\t\tif(typeof currentEvent.up === \"function\")\r\n\t\t\t\tcurrentEvent.up({\r\n\t\t\t\t\tdistanceX: mvalx,\r\n\t\t\t\t\tdistanceY: mvaly,\r\n\t\t\t\t\tspeedX: _speed.x,\r\n\t\t\t\t\tspeedY: _speed.y,\r\n                    x: _moveEnd.x,\r\n                    y: _moveEnd.y\r\n\t\t\t\t});\r\n\r\n\t\t\tif(Math.abs(mvalx) >= Math.abs(mvaly)){\r\n\t\t\t\tif(mvalx>=_cz){\r\n\t\t\t\t\tif(typeof currentEvent.right === \"function\")\r\n\t\t\t\t\tcurrentEvent.right(mvalx);\r\n\t\t\t\t}else if(mvalx<=-_cz){\r\n\t\t\t\t\tif(typeof currentEvent.left === \"function\")\r\n\t\t\t\t\tcurrentEvent.left(mvalx);\r\n\t\t\t\t}\r\n\t\t\t}else{\r\n\t\t\t\tif(mvaly>=_cz){\r\n\t\t\t\t\tif(typeof currentEvent.bottom === \"function\")\r\n\t\t\t\t\tcurrentEvent.bottom(mvaly);\r\n\t\t\t\t}else if(mvaly<=-_cz){\r\n\t\t\t\t\tif(typeof currentEvent.top === \"function\")\r\n\t\t\t\t\tcurrentEvent.top(mvaly);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tMonkeyEvent.removeEventListener(window, MonkeyEvent.MOUSE_MOVE, BODY_MOUSE_MOVE);\r\n\t\t\tMonkeyEvent.removeEventListener(window, MonkeyEvent.MOUSE_UP, BODY_MOUSE_UP);\r\n\t\t\tcurrentEvent = previousAngle = previousDist = null;\r\n\r\n\t\t\t_speed = {\r\n\t\t\t\tx: 0,\r\n\t\t\t\ty: 0\r\n\t\t\t}\r\n\r\n\t\t},\r\n\t\tBODY_MOUSE_MOVE = function(e){\r\n\r\n\t\t\tif(!currentEvent)\r\n\t\t\t\treturn;\r\n\t\t\tif(!ISPC){\r\n\t\t\t\tmx[0] = e.targetTouches[0].pageX;\r\n\t\t\t\tmy[0] = e.targetTouches[0].pageY;\r\n\r\n                if(e.targetTouches.length > 1){\r\n                    mx[1] = e.targetTouches[1].pageX;\r\n                    my[1] = e.targetTouches[1].pageY;\r\n                    //距离\r\n                    var _distance = Math.sqrt(Math.pow(mx[1] - mx[0], 2) + Math.pow(my[1] - my[0], 2));\r\n                    //角度\r\n                    var _angle = Math.atan((my[1] - my[0])/(mx[1] - mx[0]));\r\n\r\n                    //缩放\r\n                    if(previousDist && typeof currentEvent.scale === 'function'){\r\n                        currentEvent.scale({\r\n                            distance: _distance,\r\n                            speed: _distance - previousDist\r\n                        });\r\n                    }\r\n                    //旋转\r\n                    if(previousAngle && typeof currentEvent.rotate === 'function'){\r\n\r\n                        var _speed = _angle - previousAngle;\r\n                        if(_speed > 2.5)\r\n                            _speed = -(1.57 - _angle + 1.57 + previousAngle)\r\n                        else if(_speed < -2.5)\r\n                            _speed = 1.57 - previousAngle + 1.57 + _angle\r\n\r\n                        currentEvent.rotate({\r\n                            angle: _angle,\r\n                            speed: _speed\r\n                        });\r\n                    }\r\n\r\n                    previousDist = _distance;\r\n                    previousAngle = _angle;\r\n\r\n                }\r\n\t\t\t}else{\r\n\t\t\t\tmx[0] = e.clientX;\r\n\t\t\t\tmy[0] = e.clientY;\r\n\t\t\t}\r\n\r\n            _moveEnd = {\r\n                x: mx[0],\r\n                y: my[0]\r\n            };\r\n\r\n\t\t\tendTime = Date.now();\r\n\t\t\tvar timestamp = endTime - startTime || 5;\r\n\t\t\tstartTime = endTime;\r\n\r\n\t\t\tvar _distance = {\r\n\t\t\t\tx: mx[0]-dx[0],\r\n\t\t\t\ty: my[0]-dy[0]\r\n\t\t\t};\r\n\r\n\t\t\tdx[0] = mx[0];\r\n\t\t\tdy[0] = my[0];\r\n\r\n\t\t\t_speed = {\r\n\t\t\t\tx: _distance.x / timestamp,\r\n\t\t\t\ty: _distance.y / timestamp\r\n\t\t\t};\r\n\r\n\t\t\tif(typeof currentEvent.move === \"function\")\r\n\t\t\tcurrentEvent.move({\r\n\t\t\t\tdistanceX: _distance.x,\r\n\t\t\t\tdistanceY: _distance.y,\r\n\t\t\t\tspeedX: _speed.x,\r\n\t\t\t\tspeedY: _speed.y,\r\n\t\t\t});\r\n\t\t\t\r\n\t\t};\r\n\t\t\r\n\t\t\r\n\tfunction EventFactory(o){\r\n\t\tvar _s = this;\r\n\t\tthis.top = this.left = this.right = this.bottom = this.down = this.move = this.up = null;\r\n\t\tthis.e = o;\r\n\r\n\t\tthis.MOUSE_DOWN = function(e){\r\n\t\t\tMonkeyEvent.addEventListener(window, MonkeyEvent.MOUSE_MOVE, BODY_MOUSE_MOVE);\r\n\t\t\tMonkeyEvent.addEventListener(window, MonkeyEvent.MOUSE_UP, BODY_MOUSE_UP);\r\n\t\t\tcurrentEvent = _s;\r\n\r\n\t\t\tif(!ISPC){\r\n\t\t\t\tstrx = dx[0] = mx[0] = e.targetTouches[0].pageX;\r\n\t\t\t\tstry = dy[0] = my[0] = e.targetTouches[0].pageY;\r\n\r\n\t\t\t}else{\r\n\t\t\t\tstrx = dx[0] = mx[0] = e.clientX;\r\n\t\t\t\tstry = dy[0] = my[0] = e.clientY;\r\n\t\t\t}\r\n\r\n\r\n\t\t\tif(typeof _s.down === \"function\")\r\n\t\t\t_s.down(e);\r\n\r\n\t\t\tstartTime = Date.now();\r\n\r\n            _moveEnd = {\r\n                x: mx[0],\r\n                y: my[0]\r\n            };\r\n\r\n\t\t}\r\n\t\tthis.addEvent();\r\n\r\n\t}\r\n\r\n\t//添加事件\r\n\tEventFactory.prototype.addEvent = function(){\r\n\t\tvar _s = this;\r\n\t\tMonkeyEvent.addEventListener(_s.e,MonkeyEvent.MOUSE_DOWN, _s.MOUSE_DOWN);\r\n\t}\r\n\r\n\t//删除事件\r\n\tEventFactory.prototype.removeEvent=function(){\r\n\t\tvar _s = this;\r\n\t\t_s.top = _s.left = _s.right = _s.bottom = _s.down = _s.move = _s.up = null;\r\n\r\n\t\tMonkeyEvent.removeEventListener(_s.e,MonkeyEvent.MOUSE_DOWN, _s.MOUSE_DOWN);\r\n\t}\r\n\r\n\tfunction MonkeyEventInit(o){\r\n\t\tfor(var i = 0; i < EvList.length; i++){\r\n\t\t\tif(EvList[i].e == o)\r\n\t\t\treturn EvList[i];\r\n\t\t}\r\n\r\n\t\tvar Ev = new EventFactory(o);\r\n\t\tEvList.push(Ev);\r\n\t\treturn Ev;\r\n\t}\r\n\r\n\treturn MonkeyEventInit;\r\n\r\n})();"]}